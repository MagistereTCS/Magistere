define(["jquery","jqueryui"],function(){function a(){$("#search-form-title").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#id_owner-ressearch").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#id_domain-ressearch").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#id_date-ressearch").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#id_search-ressearch").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#id_types-ressearch").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#id_buttons-ressearch").detach().appendTo("#frontpage-tabs-1 .resource-search"),$("#search_result").detach().appendTo("#frontpage-tabs-1"),$("#id_add_resource").detach().appendTo("#frontpage-tabs-2"),$("#id_audio_options").detach().appendTo("#frontpage-tabs-2"),$("#id_video_options").detach().appendTo("#frontpage-tabs-2"),$("#id_add_resource_type").detach().appendTo("#frontpage-tabs-2"),$("#frontpage-tabs").tabs({activate:function(a,b){"frontpage-tabs-2"==b.newPanel[0].id?$("#id_add_new_resource").val(1):$("#id_add_new_resource").val(0)}}),$("#mform1").submit(function(a){if(1==$("#id_add_new_resource").val()){var d=$("#frontpage-tabs-2").find("#id_title"),e=$("#frontpage-tabs-2").find("#id_description"),f=$("#frontpage-tabs-2").find(".filepicker-filename:first-child").children().prop("tagName").toLowerCase(),g=($("#frontpage-tabs-2").find(".fp-content").children(),d.parent().parent()),h=e.parent().parent(),i=$("#frontpage-tabs-2").find("#fitem_id_attachments");b(a,d,g),b(a,e,h),c(a,f,i)}});var a=void 0;$("#fitem_id_attachments").on("DOMSubtreeModified",".filepicker-filename",function(b){var c=$(this).find("a").attr("href");if(c&&a!==c){a=$(this).find("a").attr("href");var d=["' . implode('","', $CFG->centralizedresources_allow_filetype['diaporama']) . '"],e=a.lastIndexOf("/"),f=null;e!==!1&&(f=a.substr(e+1));var g=f.split(".");g.length>1&&(d.indexOf(g[g.length-1])!=-1?$("#id_add_resource_type").is(":visible")?$("#id_display > option[value$='.RESOURCELIB_DISPLAY_DOWNLOAD.']").show():($("#id_display > option[value$='.RESOURCELIB_DISPLAY_DOWNLOAD.']").hide(),$("#id_display").val("0")):$("#id_display > option[value$='.RESOURCELIB_DISPLAY_DOWNLOAD.']").show())}}),$("#id_type_single_file").click(function(){$("#id_display > option[value$='.RESOURCELIB_DISPLAY_DOWNLOAD.']").show()}),$("#id_type_multimedia_file").click(function(){$("#id_display > option[value$='.RESOURCELIB_DISPLAY_DOWNLOAD.']").hide()})}function b(a,b,c){""==b.val()?d(a,c,"true"):d(a,c,"false")}function c(a,b,c){"a"==b?d(a,c,"false"):d(a,c,"true")}function d(a,b,c){var b=b,c=c;"true"==c?(0==b.find(".error").length&&e(b),a.preventDefault()):f(b)}function e(a){var a=a;a.append('<div class="felement ftext error"><span class="error"> * Vous devez remplir ce champ.<br></span></div>')}function f(a){var a=a;a.find(".error").remove()}return{init:function(){a()}}});
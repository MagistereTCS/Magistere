define(["jquery","jqueryui"],function(a){function b(b,c){var d=!1,e="";a(".filepicker-filename").bind("DOMNodeInserted",function(){if(1!=d){var f=a(".filepicker-filename").find("a").attr("href");f&&e!=f&&(e=f,d=!0,a.ajax({type:"POST",url:c,data:{url:f,courseid:b},datatype:"json",success:function(b){var c=JSON.parse(b);"simple"==c.type?a(".panel-complex").show():a(".panel-complex").hide(),a("[name='type']").val(c.type),a("#page-blocks-csv-enrol-warning").empty(),""!=c.msg&&a("#page-blocks-csv-enrol-warning").append("<p>"+c.msg+"</p>"),d=!1},error:function(a){console.log(a)}}))}})}return{init:function(a,c){b(a,c)}}});
YUI.add("moodle-atto_pythonformat-button",function(e,t){var n="atto_pythonformat",r={FORM:"atto_pythonformat_form",TEXTAREA:"atto_pythonformat_textarea"},i={FORM:"."+r.FORM,CODE:"."+r.TEXTAREA},s='<form class="{{CSS.FORM}}"><label for="{{elementid}}_atto_pythonformat_textarea">{{get_string "insertcodeintextarea" component}}</label><span>{{get_string "openspan" component}}</span><br/><textarea class="fullwidth {{CSS.TEXTAREA}}" id="{{elementid}}_atto_pythonformat_textarea" rows="25" cols="32"></textarea><br/><span>{{get_string "closespan" component}}</span><br/><div class="mdl-align"><br/><button class="submit" type="submit">{{get_string "insertcode" component}}</button></div></form>';e.namespace("M.atto_pythonformat").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.addButton({icon:"icon",iconComponent:"atto_pythonformat",buttonName:"python",callback:this._displayDialogue})},_displayDialogue:function(){this._currentSelection=this.get("host").getSelection();if(this._currentSelection===!1)return;var e=this.getDialogue({headerContent:M.util.get_string("insertcode",n),focusAfterHide:!0},!0);e.set("bodyContent",this._getDialogueContent()).show()},_getDialogueContent:function(){var t=e.Handlebars.compile(s),i=e.Node.create(t({component:n,elementid:this.get("host").get("elementid"),CSS:r}));return i.one(".submit").on("click",this._insertCode,this),i},_insertCode:function(e){e.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var t=e.currentTarget.ancestor(i.FORM),n=t.one(i.CODE).get("value"),r=this.get("host");n!==""&&(n=n.replace(/(?:\r\n|\r|\n)/g,"<br>"),n='<span syntax = "python" style ="white-space: pre-wrap;">'+n+"</span>",r.setSelection(this._currentSelection),r.insertContentAtFocusPoint(n),this.markUpdated(),this.editor.focus())}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
